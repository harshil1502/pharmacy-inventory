// =========================================
// PharmSync Button Components
// Material Design 3 Buttons
// =========================================

// Base Button
// -----------------------------------------
.button {
  @include typography($md-sys-typescale-label-large);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: $spacing-2;
  padding: $button-padding-y $button-padding-x;
  border: none;
  cursor: pointer;
  user-select: none;
  @include smooth-transition;

  &:disabled {
    opacity: 0.38;
    cursor: not-allowed;
    pointer-events: none;
  }

  &__icon {
    width: 18px;
    height: 18px;
  }
}

// Primary Button (Shoppers Red - Pill Shape)
// -----------------------------------------
.button-primary {
  @extend .button;
  background-color: var(--md-sys-color-primary);
  color: var(--md-sys-color-on-primary);
  border-radius: var(--md-sys-shape-button); // Full radius (pill)
  @include elevation(0);
  @include elevation-transition;

  &:hover:not(:disabled) {
    background-color: var(--md-sys-color-primary-hover);
    @include elevation(1);
  }

  &:active:not(:disabled) {
    background-color: var(--md-sys-color-primary-active);
    @include elevation(0);
  }

  &:focus-visible {
    outline: 2px solid var(--md-sys-color-primary);
    outline-offset: 2px;
  }
}

// Secondary Button (Medical Blue)
// -----------------------------------------
.button-secondary {
  @extend .button;
  background-color: var(--md-sys-color-secondary);
  color: var(--md-sys-color-on-secondary);
  border-radius: var(--md-sys-shape-button-secondary); // 12px

  &:hover:not(:disabled) {
    background-color: var(--md-sys-color-secondary-hover);
  }

  &:active:not(:disabled) {
    background-color: var(--md-sys-color-secondary-active);
  }
}

// Outlined Button
// -----------------------------------------
.button-outlined {
  @extend .button;
  background-color: transparent;
  color: var(--md-sys-color-primary);
  border: 1px solid var(--md-sys-color-outline);
  border-radius: var(--md-sys-shape-button-secondary);

  &:hover:not(:disabled) {
    background-color: rgba(225, 47, 41, 0.08);
    border-color: var(--md-sys-color-primary);
  }

  &:active:not(:disabled) {
    background-color: rgba(225, 47, 41, 0.12);
  }
}

// Text Button
// -----------------------------------------
.button-text {
  @extend .button;
  background-color: transparent;
  color: var(--md-sys-color-primary);
  padding: $spacing-2 $spacing-4;

  &:hover:not(:disabled) {
    background-color: rgba(225, 47, 41, 0.08);
  }

  &:active:not(:disabled) {
    background-color: rgba(225, 47, 41, 0.12);
  }
}

// Error Button
// -----------------------------------------
.button-error {
  @extend .button;
  background-color: var(--md-sys-color-error);
  color: var(--md-sys-color-on-error);
  border-radius: var(--md-sys-shape-button-secondary);

  &:hover:not(:disabled) {
    background-color: #DC2626; // Darker red
  }

  &:active:not(:disabled) {
    background-color: #B91C1C; // Even darker
  }
}

// Icon Button
// -----------------------------------------
.button-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  padding: 0;
  background-color: transparent;
  color: var(--md-sys-color-on-surface);
  border: none;
  border-radius: var(--md-sys-shape-corner-full);
  cursor: pointer;
  @include smooth-transition;

  &:hover:not(:disabled) {
    background-color: var(--md-sys-color-surface-container-high);
  }

  &:active:not(:disabled) {
    background-color: var(--md-sys-color-surface-container-highest);
  }

  &:disabled {
    opacity: 0.38;
    cursor: not-allowed;
  }

  svg {
    width: 24px;
    height: 24px;
  }

  &--small {
    width: 32px;
    height: 32px;

    svg {
      width: 20px;
      height: 20px;
    }
  }

  &--large {
    width: 48px;
    height: 48px;

    svg {
      width: 28px;
      height: 28px;
    }
  }
}

// Floating Action Button (FAB)
// -----------------------------------------
.fab {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 56px;
  height: 56px;
  background-color: var(--md-sys-color-primary);
  color: var(--md-sys-color-on-primary);
  border: none;
  border-radius: var(--md-sys-shape-corner-large); // 16px
  cursor: pointer;
  @include elevation(3);
  @include elevation-transition;
  @include smooth-transition;

  &:hover:not(:disabled) {
    @include elevation(4);
    background-color: var(--md-sys-color-primary-hover);
  }

  &:active:not(:disabled) {
    @include elevation(3);
    background-color: var(--md-sys-color-primary-active);
  }

  svg {
    width: 24px;
    height: 24px;
  }

  &--small {
    width: 40px;
    height: 40px;

    svg {
      width: 20px;
      height: 20px;
    }
  }

  &--large {
    width: 96px;
    height: 96px;

    svg {
      width: 36px;
      height: 36px;
    }
  }

  &--extended {
    width: auto;
    padding: 0 $spacing-6;
    gap: $spacing-3;
    @include typography($md-sys-typescale-label-large);
  }
}

// Button Size Variants
// -----------------------------------------
.button--small {
  padding: $spacing-2 $spacing-4;
  @include typography($md-sys-typescale-label-medium);
}

.button--large {
  padding: $spacing-4 $spacing-8;
  @include typography($md-sys-typescale-label-large);
  font-weight: $font-weight-semibold;
}

// Button States
// -----------------------------------------
.button--loading {
  position: relative;
  color: transparent;
  pointer-events: none;

  &::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 20px;
    height: 20px;
    border: 2px solid currentColor;
    border-top-color: transparent;
    border-radius: 50%;
    animation: spin 0.6s linear infinite;
  }
}

// Button Group
// -----------------------------------------
.button-group {
  display: inline-flex;
  gap: $spacing-2;

  &--attached {
    gap: 0;

    .button {
      border-radius: 0;

      &:first-child {
        border-top-left-radius: var(--md-sys-shape-button-secondary);
        border-bottom-left-radius: var(--md-sys-shape-button-secondary);
      }

      &:last-child {
        border-top-right-radius: var(--md-sys-shape-button-secondary);
        border-bottom-right-radius: var(--md-sys-shape-button-secondary);
      }

      &:not(:last-child) {
        border-right: 1px solid var(--md-sys-color-outline-variant);
      }
    }
  }
}
